#:include traps.kv
#:include food.kv

FloatLayout:
    Background:
        id: background
        canvas.before:
            Rectangle:
                size: self.size
                pos: self.pos
                source: "background.png"
            Rectangle:
                size: self.width, app.window_height / 5
                pos: self.pos[0], self.pos[1] + self.height - app.window_height / 5
                texture: self.cloud_texture
            Rectangle:
                size: self.width, app.window_height / 2
                pos: self.pos[0], self.pos[1]
                texture: self.city_texture
    Label:
        id: score
        size_hint_y: None
        height: app.window_height / 5
        text: "0"
        font_size: app.window_height / 14
    Button:
        size_hint: None, None
        size: app.window_height / 5 * 2, app.window_height / 5
        pos: (root.width / 2.0) - app.window_height / 5, (root.height / 2.0) - app.window_height / 10
        text: "Начать игру"
        background_normal: "start_game.png"
        background_down: "start_game.png"
        id: start_game_button
        disabled: False
        on_release:
            self.disabled = True
            self.opacity = 0
            app.start_game()
            energy.opacity = 1
    Button:
        size_hint: None, None
        size: app.window_height / 7 * 2, app.window_height / 7
        pos: app.window_height / 14, app.window_height / 14
        text: "Об Игре"
        background_normal: "button_frame.png"
        background_down: "button_frame.png"
        id: about_game_button
        opacity: 1.0
        on_release:
            self.disabled = False
            self.opacity = 0
            # Делаем недоступными начало игры
            start_game_button.disabled = True
            # Показываем свиток с кнопкой назад и текст
            about_game.opacity = 1
            about_game_text1.opacity = 1
            about_game_text2.opacity = 1
            about_game_text3.opacity = 1
    BoxLayout:
        orientation: 'vertical'
        id: about_game
        pos: 0, 0
        opacity: 0.0
        Button:
            text: "Назад"
            font_size: app.window_height / 14
            size_hint: 0.8, 0.3
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            background_normal: "transparent.png"
            background_down: "transparent.png"
            on_release:
                # Скрываем информацию
                about_game.opacity = 0
                about_game_text1.opacity = 0
                about_game_text2.opacity = 0
                about_game_text3.opacity = 0
                about_game.disabled = False
                about_game_button.opacity = 1
                # Включаем начало игры
                start_game_button.disabled = False
        Image:
            source: "scroll.png"
            disabled: False
        Label:
            size_hint: 0.8, 0.5
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: ""
            font_size: 40
    Label:
        id: about_game_text1
        size_hint_y: None
        height: root.height + app.window_height / 2
        text: "Игра Flappy Ururu v0.4.2"
        font_size: app.window_width / 45
        color: (255, 255, 255)
        opacity: 0.0
    Label:
        id: about_game_text2
        size_hint_y: None
        height: root.height + app.window_height / 6
        text: "    Разработчик: Дракоша \n    Иллюстрации: Mr.Zapadlo \n    Задний фон: интернет"
        font_size: app.window_width / 55
        color: (255, 255, 255)
        opacity: 0.0
    Label:
        id: about_game_text3
        size_hint_y: None
        height: root.height - app.window_height / 10
        text: "    Вдохновитель: Ururu-chan \n    Поддержите Втубера"
        font_size: app.window_width / 55
        color: (255, 255, 255)
        opacity: 0.0
    Label:
        id: energy
        size_hint_y: None
        pos: -app.window_height / 2.3, app.window_height / 14
        text: "Энергия: " + str(app.energy) + " / " + str(app.max_energy)
        font_size: app.window_height / 25
        color: 1, 0, 0, 1
        opacity: 0.0
    Ururu:
        source: "ururu1.png"
        size_hint: None, None
        size: app.window_height / 5 * 0.6, app.window_height / 5
        pos: 20, root.height / 2.0
        id: ururu